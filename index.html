<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sistema Ãšnico SST</title>

  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 20px;
      background: #f4f6f8;
    }

    header {
      text-align: center;
      padding: 20px;
      background: #003366;
      color: white;
      border-radius: 12px;
    }

    h1 {
      margin: 0;
      font-size: 24px;
    }

    .btn {
      display: block;
      width: 100%;
      padding: 15px;
      margin: 12px 0;
      font-size: 18px;
      border: none;
      border-radius: 10px;
      background: #0059b3;
      color: white;
      cursor: pointer;
    }

    section {
      display: none;
      margin-top: 20px;
      padding: 15px;
      background: white;
      border-radius: 12px;
    }

    label {
      display: block;
      margin: 10px 0;
    }

    textarea {
      width: 100%;
      height: 80px;
      border-radius: 8px;
      padding: 10px;
      border: 1px solid #ccc;
    }

    .save {
      background: green;
    }
  </style>
</head>

<body>

<header>
  <h1>Sistema Ãšnico de SST</h1>
  <p>FREIBERGER & FERNANDES â€“ SoluÃ§Ãµes em Engenharia</p>
  <p><b>PadrÃ£o FiscalizaÃ§Ã£o</b></p>
</header>

<!-- MENU -->
<button class="btn" type="button" onclick="abrir('nr35')">
ğŸ“‹ NR35 â€“ Checklist
</button>

<button class="btn" type="button" onclick="abrir('apr')">
âš ï¸ APR â€“ AnÃ¡lise de Risco
</button>

<button class="btn" type="button" onclick="abrir('historico')">
ğŸ“‚ HistÃ³rico
</button>

<!-- NR35 -->
<section id="nr35">
  <h2>Checklist NR35</h2>

  <label><input type="checkbox" id="c1"> Treinamento NR35 vÃ¡lido</label>
  <label><input type="checkbox" id="c2"> EPIs inspecionados</label>
  <label><input type="checkbox" id="c3"> Linha de vida instalada</label>
  <label><input type="checkbox" id="c4"> Ancoragem certificada</label>
  <label><input type="checkbox" id="c5"> Ãrea sinalizada</label>

  <h3>ObservaÃ§Ãµes</h3>
  <textarea id="obs"></textarea>

  <button class="btn save" onclick="salvarNR35()">ğŸ’¾ Salvar NR35</button>
</section>

<!-- APR -->
<section id="apr">
  <h2>APR â€“ AnÃ¡lise Preliminar de Risco</h2>
  <textarea id="aprtexto" placeholder="Descreva os riscos e medidas de controle..."></textarea>

  <button class="btn save" onclick="salvarAPR()">ğŸ’¾ Salvar APR</button>
</section>

<!-- HISTÃ“RICO -->
<section id="historico">
  <h2>HistÃ³rico de Registros</h2>
  <div id="lista"></div>
</section>

<!-- FUNÃ‡Ã•ES -->
<script>
  function abrir(id) {
    document.querySelectorAll("section").forEach(sec => {
      sec.style.display = "none";
    });

    let alvo = document.getElementById(id);
    if (alvo) {
      alvo.style.display = "block";
      alvo.scrollIntoView({ behavior: "smooth" });
    }

    if (id === "historico") {
      carregarHistorico();
    }
  }

  function salvarNR35() {
    let registro = {
      tipo: "NR35",
      data: new Date().toLocaleString(),
      obs: document.getElementById("obs").value
    };

    let dados = JSON.parse(localStorage.getItem("sst") || "[]");
    dados.push(registro);
    localStorage.setItem("sst", JSON.stringify(dados));

    alert("âœ… Registro NR35 salvo com sucesso!");
  }

  function salvarAPR() {
    let registro = {
      tipo: "APR",
      data: new Date().toLocaleString(),
      texto: document.getElementById("aprtexto").value
    };

    let dados = JSON.parse(localStorage.getItem("sst") || "[]");
    dados.push(registro);
    localStorage.setItem("sst", JSON.stringify(dados));

    alert("âœ… APR salva com sucesso!");
  }

  function carregarHistorico() {
    let dados = JSON.parse(localStorage.getItem("sst") || "[]");
    let html = "";

    dados.forEach(r => {
      html += `<p><b>${r.tipo}</b> â€“ ${r.data}</p>`;
    });

    document.getElementById("lista").innerHTML =
      html || "<p>Nenhum registro salvo ainda.</p>";
  }
</script>

</body>
</html>
