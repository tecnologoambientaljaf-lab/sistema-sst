<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NR35 ‚Äì Autoriza√ß√£o Trabalho em Altura</title>

<style>
body{font-family:Arial;margin:0;padding:15px;background:#f4f6f8;}
header{text-align:center;padding:20px;background:#003366;color:#fff;border-radius:12px;}
h1{margin:0;font-size:22px;}
.btn{width:100%;padding:14px;margin:10px 0;border:none;border-radius:10px;
background:#0059b3;color:white;font-size:16px;font-weight:bold;}
.save{background:green;}
.pdf{background:darkred;}
section{background:#fff;border-radius:12px;padding:15px;margin-top:15px;}
input,select,textarea{width:100%;padding:8px;border-radius:8px;border:1px solid #ccc;}
table{width:100%;border-collapse:collapse;margin-top:10px;}
th,td{border:1px solid #aaa;padding:6px;font-size:13px;}
th{background:#e8eef5;}
.small{font-size:12px;color:#444;}
</style>
</head>

<body>

<header>
<h1>NR35 ‚Äì AUTORIZA√á√ÉO TRABALHO EM ALTURA</h1>
<p><b>FREIBERGER & FERNANDES ‚Äì Engenharia</b></p>
<p>Padr√£o Fiscaliza√ß√£o Oficial</p>
</header>

<section>

<h2>1. Dados da Obra</h2>

<label>Local:
<input id="local" placeholder="Ex: Col√©gio Adventista">
</label>

<label>Respons√°vel Empresa:
<input id="empresa" placeholder="Ex: Projeto A">
</label>

<label>Respons√°vel Contratada:
<input id="resp" placeholder="Ex: Eng. Jadison / Eng. Luan">
</label>

<h2>2. Tipo de Trabalho</h2>
<label><input type="checkbox"> Telhado</label>
<label><input type="checkbox"> Andaimes</label>
<label><input type="checkbox"> Escadas</label>
<label><input type="checkbox"> Laje</label>

<h2>3. Capacita√ß√£o / Exame / Riscos Gerais</h2>

<table>
<tr><th>Item</th><th>Status</th><th>Medidas de Seguran√ßa</th></tr>

<tr><td>Funcion√°rio treinado na atividade?</td>
<td><select><option>Sim</option><option>N√£o</option><option>N/A</option></select></td>
<td><input></td></tr>

<tr><td>Exame m√©dico OK?</td>
<td><select><option>Sim</option><option>N√£o</option><option>N/A</option></select></td>
<td><input></td></tr>

<tr><td>Existe risco de contato com partes energizadas?</td>
<td><select><option>Sim</option><option>N√£o</option><option>N/A</option></select></td>
<td><input></td></tr>

<tr><td>Tempo seco e sem vento forte?</td>
<td><select><option>Sim</option><option>N√£o</option><option>N/A</option></select></td>
<td><input></td></tr>

<tr><td>Existe risco de queda de objetos?</td>
<td><select><option>Sim</option><option>N√£o</option><option>N/A</option></select></td>
<td><input></td></tr>

<tr><td>√Årea de trabalho isolada?</td>
<td><select><option>Sim</option><option>N√£o</option><option>N/A</option></select></td>
<td><input></td></tr>

<tr><td>Local seguro para fixa√ß√£o do cinto?</td>
<td><select><option>Sim</option><option>N√£o</option><option>N/A</option></select></td>
<td><input></td></tr>
</table>

<h2>4. Telhados + EPIs</h2>

<table>
<tr>
<th>Item</th><th>Status</th>
<th>EPI</th><th>Status</th>
</tr>

<tr>
<td>Escada adequada e em condi√ß√µes?</td>
<td><select><option>Sim</option><option>N√£o</option><option>N/A</option></select></td>
<td>Sapato biqueira a√ßo?</td>
<td><select><option>Sim</option><option>N√£o</option><option>N/A</option></select></td>
</tr>

<tr>
<td>Sistema trava-quedas instalado?</td>
<td><select><option>Sim</option><option>N√£o</option><option>N/A</option></select></td>
<td>Cinto com 2 talabartes?</td>
<td><select><option>Sim</option><option>N√£o</option><option>N/A</option></select></td>
</tr>

<tr>
<td>Cordas para i√ßamento?</td>
<td><select><option>Sim</option><option>N√£o</option><option>N/A</option></select></td>
<td>√ìculos de seguran√ßa?</td>
<td><select><option>Sim</option><option>N√£o</option><option>N/A</option></select></td>
</tr>
</table>

<h2>5. Andaimes + EPIs</h2>

<table>
<tr>
<th>Item</th><th>Status</th>
<th>EPI</th><th>Status</th>
</tr>

<tr>
<td>Andaime montado e nivelado?</td>
<td><select><option>Sim</option><option>N√£o</option><option>N/A</option></select></td>
<td>Capacete obrigat√≥rio?</td>
<td><select><option>Sim</option><option>N√£o</option><option>N/A</option></select></td>
</tr>

<tr>
<td>Sistema trava-quedas presente?</td>
<td><select><option>Sim</option><option>N√£o</option><option>N/A</option></select></td>
<td>Luvas adequadas?</td>
<td><select><option>Sim</option><option>N√£o</option><option>N/A</option></select></td>
</tr>
</table>

<h2>6. Escadas + EPIs</h2>

<table>
<tr><th>Item</th><th>Status</th><th>EPI</th><th>Status</th></tr>

<tr>
<td>Escada em boas condi√ß√µes?</td>
<td><select><option>Sim</option><option>N√£o</option><option>N/A</option></select></td>
<td>Cinto com talabarte?</td>
<td><select><option>Sim</option><option>N√£o</option><option>N/A</option></select></td>
</tr>

<tr>
<td>Escada ultrapassa 1m do ponto?</td>
<td><select><option>Sim</option><option>N√£o</option><option>N/A</option></select></td>
<td>√ìculos de seguran√ßa?</td>
<td><select><option>Sim</option><option>N√£o</option><option>N/A</option></select></td>
</tr>
</table>

<h2>7. Laje + EPIs</h2>

<table>
<tr><th>Item</th><th>Status</th><th>EPI</th><th>Status</th></tr>

<tr>
<td>Linha de vida independente instalada?</td>
<td><select><option>Sim</option><option>N√£o</option><option>N/A</option></select></td>
<td>Trava-quedas retr√°til?</td>
<td><select><option>Sim</option><option>N√£o</option><option>N/A</option></select></td>
</tr>

<tr>
<td>Instala√ß√µes desconectadas?</td>
<td><select><option>Sim</option><option>N√£o</option><option>N/A</option></select></td>
<td>Protetor auricular?</td>
<td><select><option>Sim</option><option>N√£o</option><option>N/A</option></select></td>
</tr>
</table>

<h2>8. Declara√ß√£o</h2>
<p class="small">
Declaro estar ciente dos riscos e comprometo-me a cumprir todos os itens desta autoriza√ß√£o.
</p>

<h2>9. Assinaturas dos Trabalhadores</h2>

<p class="small">
Assine diretamente na tela (padr√£o fiscaliza√ß√£o NR35).
</p>

<div id="assinaturas"></div>

<button class="btn" onclick="limparAssinaturas()">
üßπ Limpar Todas Assinaturas
</button>


<label>Liberado por:
<input placeholder="Respons√°vel Libera√ß√£o">
</label>

<label>Data:
<input type="date">
</label>

<button class="btn save" onclick="alert('‚úÖ Registro salvo no hist√≥rico (pr√≥xima vers√£o)')">
üíæ Salvar Autoriza√ß√£o Completa
</button>

<button class="btn pdf" onclick="alert('üìÑ PDF completo ser√° gerado na pr√≥xima etapa profissional')">
üìÑ Gerar PDF Fiscaliza√ß√£o Completo
</button>

</section>
<script>
/* ================================
   ASSINATURA DIGITAL ‚Äì FIX MOBILE
================================ */

let pads = [];

function carregarAssinaturas() {
  const container = document.getElementById("assinaturas");
  container.innerHTML = "";

  for (let i = 1; i <= 5; i++) {

    let bloco = document.createElement("div");
    bloco.innerHTML = `
      <h3>Trabalhador ${i}</h3>

      <label>Nome:</label>
      <input id="nome${i}" placeholder="Nome completo">

      <label>CPF:</label>
      <input id="cpf${i}" placeholder="CPF">

      <label>Assinatura Digital:</label>

      <canvas id="canvas${i}"
        style="width:100%; height:150px; border:1px solid #000;
        border-radius:8px; background:white;">
      </canvas>

      <button class="btn" style="background:gray;" onclick="limparCanvas(${i})">
        Limpar Assinatura ${i}
      </button>

      <hr>
    `;

    container.appendChild(bloco);
  }

  // Inicializar pads ap√≥s renderizar
  setTimeout(() => {
    for (let i = 1; i <= 5; i++) {
      let canvas = document.getElementById("canvas" + i);

      // Ajuste real do tamanho do canvas
      canvas.width = canvas.offsetWidth;
      canvas.height = 150;

      pads[i] = new SignaturePad(canvas);
    }
  }, 300);
}

function limparCanvas(i) {
  pads[i].clear();
}

function limparAssinaturas() {
  for (let i = 1; i <= 5; i++) {
    pads[i].clear();
  }
}

/* ================================
   CARREGAR QUANDO ABRIR NR35
================================ */
function abrir(id){
  document.querySelectorAll("section").forEach(sec=>sec.style.display="none");
  document.getElementById(id).style.display="block";

  if(id==="nr35"){
    carregarAssinaturas(); // for√ßa assinatura funcionar sempre
  }
}
</script>

/* ================================
   GERAR 5 ASSINATURAS DIGITAIS
================================ */
let pads = [];

function carregarAssinaturas() {
  let html = "";

  for (let i = 1; i <= 5; i++) {
    html += `
      <h3>Trabalhador ${i}</h3>

      <label>Nome:</label>
      <input id="nome${i}" placeholder="Nome completo">

      <label>CPF:</label>
      <input id="cpf${i}" placeholder="CPF">

      <label>Assinatura Digital:</label>
      <canvas id="canvas${i}" width="320" height="120"
        style="border:1px solid #000; border-radius:8px; background:#fff;">
      </canvas>

      <button class="btn" style="background:gray;" onclick="limparCanvas(${i})">
        Limpar Assinatura ${i}
      </button>

      <hr>
    `;
  }

  document.getElementById("assinaturas").innerHTML = html;

  // Criar SignaturePads
  for (let i = 1; i <= 5; i++) {
    let canvas = document.getElementById("canvas" + i);
    pads[i] = new SignaturePad(canvas);
  }
}

/* ================================
   LIMPAR UMA ASSINATURA
================================ */
function limparCanvas(i) {
  pads[i].clear();
}

/* ================================
   LIMPAR TODAS
================================ */
function limparAssinaturas() {
  for (let i = 1; i <= 5; i++) {
    pads[i].clear();
  }
}

/* ================================
   AUTO CARREGAR AO ABRIR
================================ */
window.onload = function() {
  carregarAssinaturas();
};
</script>

</body>
</html>
