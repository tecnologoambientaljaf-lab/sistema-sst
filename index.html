<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sistema SST ‚Äì NR35</title>

  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 15px;
      background: #f4f6f8;
    }

    header {
      text-align: center;
      padding: 20px;
      background: #003366;
      color: white;
      border-radius: 12px;
    }

    h1 { margin: 0; font-size: 22px; }

    .btn {
      display: block;
      width: 100%;
      padding: 14px;
      margin: 10px 0;
      font-size: 17px;
      border: none;
      border-radius: 10px;
      background: #0059b3;
      color: white;
      cursor: pointer;
    }

    .save { background: green; }
    .pdf { background: darkred; }

    section {
      display: none;
      margin-top: 15px;
      padding: 15px;
      background: white;
      border-radius: 12px;
    }

    label { display: block; margin: 8px 0; }

    input, textarea, select {
      width: 100%;
      padding: 8px;
      margin-top: 4px;
      border-radius: 8px;
      border: 1px solid #ccc;
    }

    textarea { height: 60px; }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 12px;
    }

    th, td {
      border: 1px solid #aaa;
      padding: 6px;
      font-size: 14px;
    }

    th { background: #e8eef5; }

  </style>
</head>

<body>

<header>
  <h1>SISTEMA √öNICO SST</h1>
  <p><b>FREIBERGER & FERNANDES ‚Äì Engenharia</b></p>
  <p>Padr√£o Fiscaliza√ß√£o ‚Äì NR35 Trabalho em Altura</p>
</header>

<button class="btn" onclick="abrir('nr35')">üìã NR35 ‚Äì Autoriza√ß√£o Trabalho em Altura</button>
<button class="btn" onclick="abrir('historico')">üìÇ Hist√≥rico</button>

<!-- ================= NR35 COMPLETO ================= -->
<section id="nr35">

  <h2>Autoriza√ß√£o para Trabalho em Altura (NR35)</h2>

  <h3>Dados da Obra</h3>
  <label>Local:
    <input id="local" placeholder="Ex: Col√©gio Adventista">
  </label>

  <label>Respons√°vel Empresa:
    <input id="empresa" placeholder="Ex: Projeto A">
  </label>

  <label>Respons√°vel Contratada:
    <input id="responsavel" placeholder="Ex: Eng. Jadison / Eng. Luan">
  </label>

  <h3>Tipo de Trabalho</h3>
  <label><input type="checkbox" id="telhado"> Em Telhado</label>
  <label><input type="checkbox" id="andaime"> Com Andaimes</label>
  <label><input type="checkbox" id="escada"> Com Escadas</label>
  <label><input type="checkbox" id="laje"> Em Laje</label>

  <!-- Checklist Geral -->
  <h3>Capacita√ß√£o / Exames / Riscos Gerais</h3>

  <table>
    <tr><th>Item</th><th>Status</th><th>Medidas de Seguran√ßa</th></tr>

    <tr>
      <td>Funcion√°rio treinado na atividade?</td>
      <td>
        <select id="g1">
          <option>Sim</option><option>N√£o</option><option>N/A</option>
        </select>
      </td>
      <td><input id="m1"></td>
    </tr>

    <tr>
      <td>Exame m√©dico OK?</td>
      <td>
        <select id="g2">
          <option>Sim</option><option>N√£o</option><option>N/A</option>
        </select>
      </td>
      <td><input id="m2"></td>
    </tr>

    <tr>
      <td>Existe risco de contato com partes energizadas?</td>
      <td>
        <select id="g3">
          <option>Sim</option><option>N√£o</option><option>N/A</option>
        </select>
      </td>
      <td><input id="m3"></td>
    </tr>

    <tr>
      <td>√Årea de trabalho isolada e sinalizada?</td>
      <td>
        <select id="g4">
          <option>Sim</option><option>N√£o</option><option>N/A</option>
        </select>
      </td>
      <td><input id="m4"></td>
    </tr>
  </table>

  <h3>Observa√ß√µes Gerais</h3>
  <textarea id="obs" placeholder="Observa√ß√µes t√©cnicas..."></textarea>

  <button class="btn save" onclick="salvarNR35()">üíæ Salvar Autoriza√ß√£o NR35</button>

  <button class="btn pdf" onclick="gerarPDF()">üìÑ Gerar PDF Fiscaliza√ß√£o</button>

</section>

<!-- ================= HIST√ìRICO ================= -->
<section id="historico">
  <h2>Hist√≥rico de Registros</h2>
  <div id="lista"></div>
</section>

<!-- ================= FUN√á√ïES ================= -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<script>
function abrir(id){
  document.querySelectorAll("section").forEach(sec=>sec.style.display="none");
  document.getElementById(id).style.display="block";

  if(id==="historico") carregarHistorico();
}

function salvarNR35(){
  let registro = {
    tipo: "NR35 Autoriza√ß√£o",
    data: new Date().toLocaleString(),
    local: document.getElementById("local").value,
    empresa: document.getElementById("empresa").value,
    responsavel: document.getElementById("responsavel").value,
    obs: document.getElementById("obs").value
  };

  let dados = JSON.parse(localStorage.getItem("sst")||"[]");
  dados.push(registro);
  localStorage.setItem("sst", JSON.stringify(dados));

  alert("‚úÖ Autoriza√ß√£o NR35 salva com sucesso!");
}

function carregarHistorico(){
  let dados = JSON.parse(localStorage.getItem("sst")||"[]");
  let html="";

  dados.forEach(r=>{
    html += `<p><b>${r.tipo}</b> ‚Äì ${r.data}<br>${r.local}</p><hr>`;
  });

  document.getElementById("lista").innerHTML =
    html || "<p>Nenhum registro salvo ainda.</p>";
}

function gerarPDF(){
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();

  doc.setFontSize(14);
  doc.text("NR35 ‚Äì AUTORIZA√á√ÉO PARA TRABALHO EM ALTURA", 15, 20);

  doc.setFontSize(11);
  doc.text("Local: " + document.getElementById("local").value, 15, 35);
  doc.text("Empresa: " + document.getElementById("empresa").value, 15, 45);
  doc.text("Respons√°vel: " + document.getElementById("responsavel").value, 15, 55);

  doc.text("Documento emitido para fins de fiscaliza√ß√£o.", 15, 70);

  doc.save("Autorizacao_NR35_Fiscalizacao.pdf");
}
</script>

</body>
</html>
